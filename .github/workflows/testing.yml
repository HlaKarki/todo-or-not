on:
  workflow_dispatch:
jobs:
  track_pr:
    runs-on: ubuntu-latest
    environment: todo-or-not-1
    steps:
      - name: Generate token
        id: generate-token
        uses: actions/create-github-app-token@v1
        with:
          app-id: ${{ vars.APP_ID }}
          private-key: ${{ secrets.APP_PEM }}
      - name: Use API
        env:
          GH_TOKEN: ${{ steps.generate-token.outputs.token }}
        run: |
          gh api --method POST \
          -H "Accept: application/vnd.github+json" \
          -H "X-GitHub-Api-Version: 2022-11-28" \
          /repos/start-out/todo-or-not/issues \
          -f title='So far...' \
          -f body='...so good! We can generate issues from a workflow. Now we just need to make them not hardcoded'
